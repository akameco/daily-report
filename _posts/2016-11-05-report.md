---
layout: post
title: "CNNでまひろを識別して顔枠付きのOP動画作成"
date: 2016-11-05
categories: report
---

### week
- [ ] 3h tex環境構築
- [ ] 2h 去年の卒論読み

### today
- [ ] 3h tex環境構築
- [ ] 1h 昨年の卒論読み
- [x] 2h CNNでキャラ判定

### next...
- [ ] 10h 画像キャプション生成

## 2h CNNでキャラ判定 6h
ラベル付けしたデータをtrainとtestにランダムに分割したがindexの値がずれてしまった。
インデックスを一つインクリメントして上書きして解決。
反省として、元データを消し去ったのは失敗だったのと、毎回コードをコミットをしておくべきだった。

### 学習実行
どう見ても過学習だけど、動画のOPに対してはうまくいくだろうということで実行してみる。

<img src="{{ site.baseurl }}/images/2016-11-05/grafh.png">

### OpenCVで識別動画作成
動画へ枠をつける

小紅 → 白
ましろ → 黒
べにお → 緑

結果

<img src="{{ site.baseurl }}/images/2016-11-05/dance.gif">

学習データに不正解データ入れ忘れた。
残念ながら、3人以外識別出来てない。
ネットワーク構成は、以下の感じ。

畳み込み層→ReLU→プーリング層→畳み込み層→ReLU→プーリング層→全結合層→ReLU→全結合層→ソフトマックス

一つ目の全結合層にDropoutを使った。

ちょっとこの辺の知識をきれいにまとめたい。

学習方法はAdamを用いた。

### 0.5h bot調査
herokuで運用してるbotが止まっていた。
とりあえず動いてる状態までRevertした。
やはりworkerプロセスで運用しないとだめらしい。

## 3h tex環境構築
tex環境の構築はDockerでやりたいが、まずはとりあえずの環境を整えるのが先か。
Macのtex環境を整えて去年の卒論がビルドできるところまで持っていく。

とりあえず以下を参考にやってみる。

[El Capitan / SierraでTeX環境をゼロから構築する方法 - Qiita](http://qiita.com/hideaki_polisci/items/3afd204449c6cdd995c9)

インストールが長すぎて暇なので別タスクやる。

残りダウンロード時間が12時間とか意味わかんない感じになったので、torrentでダウンロードすることにした。

M2の修論中間発表の論文を読んでた。
センシング系の論文が多い。

長すぎて寝たがダウンロードは終わった。
明日は、tex環境からやる。

## 雑記
週の目標達成できそうにないので変更。
一日の作業目安を6時間で終わる内容に留める。
ぶっちゃけ一日6時間以上の作業できそうにない。

netflixで`フルメタル・パニック?ふもっふ`見たけど今見てもめっちゃ面白い。
